{
  "schema": "iglu:com.snowplowanalytics.snowplow.enrichments/api_request_enrichment_config/jsonschema/1-0-0",
  "data": {
    "vendor": "com.snowplowanalytics.snowplow.enrichments",
    "name": "api_request_enrichment_config",
    "enabled": true,
    "parameters": {
      "inputs": [
        {
          "key": "token",
          "json": {
            "field": "contexts",
            "schemaCriterion": "iglu:com.google.recaptcha/action/jsonschema/1-0-0",
            "jsonPath": "$.token"
          }
        },
        {
          "key": "ip",
          "pojo": {
            "field": "user_ipaddress"
          }
        }
      ],
      "api": {
        "http": {
          "method": "POST",
          "uri": "https://www.google.com/recaptcha/api/siteverify?secret={{secretKey}}&response={{token}}&remoteip={{ip}}",
          "timeout": 3000,
          "authentication": {}
        }
      },
      "outputs": [
        {
          "schema": "iglu:com.google.recaptcha/assessment/jsonschema/1-0-0",
          "json": {
            "jsonPath": "$"
          }
        }
      ],
      "cache": {
        "size": 1,
        "ttl": 1
      }
    }
  }
}
